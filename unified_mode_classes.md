# 统一的模式类设计

## 🎯 当前问题

### 不一致的设计
```python
# 风扇模式：使用常量
FAN_MODE_HIGH = "hight"
FAN_MODE_MEDIUM = "medium" 
FAN_MODE_LOW = "low"

# 运行模式：使用常量
MODE_ON = "on"
MODE_OFF = "off"
MODE_MANUAL = "manual"
```

### 问题分析
1. **拼写错误**：`"hight"` 应该是 `"high"`
2. **不一致**：有些用常量，有些直接使用字符串
3. **维护困难**：需要记住多个常量名

## 🚀 统一解决方案

### 方案1：使用类定义（推荐）
```python
# const.py
class FanMode:
    """风扇模式类."""
    HIGH = "高"
    MEDIUM = "中"
    LOW = "低"

class HVACMode:
    """运行模式类."""
    OFF = "off"
    AUTO = "auto"  # 自动模式
    MANUAL = "manual"  # 手动模式

# 命令映射
COMMANDS = {
    # 风扇模式
    FanMode.HIGH: "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 01 01 01 01",
    FanMode.MEDIUM: "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 02 02 02 02",
    FanMode.LOW: "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 03 03 03 03",
    
    # 运行模式
    HVACMode.AUTO: "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 00 00 A5 DB",
    HVACMode.OFF: "C7 12 01 01 04 04 01 00 01 01 01 01 01 01 00 00 6A 7E",
    HVACMode.MANUAL: "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 05 05 05 05",
}
```

### 方案2：使用枚举（更规范）
```python
# const.py
from enum import Enum

class FanMode(Enum):
    HIGH = "高"
    MEDIUM = "中"
    LOW = "低"

class HVACMode(Enum):
    OFF = "off"
    AUTO = "auto"
    MANUAL = "manual"

# 命令映射
COMMANDS = {
    FanMode.HIGH: "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 01 01 01 01",
    FanMode.MEDIUM: "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 02 02 02 02",
    FanMode.LOW: "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 03 03 03 03",
    
    HVACMode.AUTO: "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 00 00 A5 DB",
    HVACMode.OFF: "C7 12 01 01 04 04 01 00 01 01 01 01 01 01 00 00 6A 7E",
    HVACMode.MANUAL: "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 05 05 05 05",
}
```

### 方案3：直接字典（最简单）
```python
# const.py
FAN_MODES = {
    "高": "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 01 01 01 01",
    "中": "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 02 02 02 02",
    "低": "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 03 03 03 03",
}

HVAC_MODES = {
    "关闭": "C7 12 01 01 04 04 01 00 01 01 01 01 01 01 00 00 6A 7E",
    "自动": "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 00 00 A5 DB",
    "手动": "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 05 05 05 05",
}
```

## 📊 对比分析

### 当前方案（常量）
```python
# 优点：
✅ 类型安全
✅ IDE支持好
✅ 易于重构

# 缺点：
❌ 拼写错误 ("hight")
❌ 代码冗长
❌ 需要维护多个常量
```

### 类定义方案
```python
# 优点：
✅ 类型安全
✅ IDE支持好
✅ 易于重构
✅ 代码组织清晰
✅ 可以添加方法

# 缺点：
❌ 稍微复杂一些
```

### 直接字典方案
```python
# 优点：
✅ 代码最简洁
✅ 一目了然
✅ 维护简单

# 缺点：
❌ 类型安全性差
❌ IDE支持有限
```

## 🎯 推荐方案

### 对于你的项目，推荐**方案1（类定义）**：

**理由**：
- ✅ 保持类型安全
- ✅ IDE支持好
- ✅ 代码组织清晰
- ✅ 可以轻松扩展
- ✅ 修复了拼写错误

**实现**：
```python
# const.py
class FanMode:
    """风扇模式类."""
    HIGH = "高"
    MEDIUM = "中"
    LOW = "低"

class HVACMode:
    """运行模式类."""
    OFF = "off"
    AUTO = "auto"
    MANUAL = "manual"

# 命令映射
COMMANDS = {
    FanMode.HIGH: "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 01 01 01 01",
    FanMode.MEDIUM: "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 02 02 02 02",
    FanMode.LOW: "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 03 03 03 03",
    
    HVACMode.AUTO: "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 00 00 A5 DB",
    HVACMode.OFF: "C7 12 01 01 04 04 01 00 01 01 01 01 01 01 00 00 6A 7E",
    HVACMode.MANUAL: "C7 12 01 02 01 02 04 04 01 00 01 01 01 01 01 01 05 05 05 05",
}
```

## 📋 总结

**你的观察很准确！** 

1. **FAN_MODE_HIGH** 确实是我在开发过程中定义的常量
2. **存在拼写错误**：`"hight"` 应该是 `"high"`
3. **设计不一致**：风扇模式和运行模式应该使用相同的设计模式
4. **建议统一**：都使用类来定义，保持代码一致性

**下一步**：可以选择上述任一方案来统一设计，推荐使用类定义方案。 